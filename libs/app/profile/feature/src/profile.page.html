<ion-content *ngIf = "!isMobile" class ="Desktop">
  <div class="profileCard">

    <ion-grid>
      <ion-row id="profile-completion-notice" *ngIf="!profileComplete">
        <ion-col>
          <ion-row style="text-align: center; align-items: center; ">
            <div style="margin: 0 auto; height: 40px; display: flex;justify-content: center; align-items: center">
              <ion-label color="danger"><ion-icon name="alert-circle-outline" color="danger" size="small" style="padding:0; margin: 0 5px 0 0"></ion-icon>Complete your profile with your email, contact number, and full name to get the most out of your experience!</ion-label>
            </div>
          </ion-row>
        </ion-col>
      </ion-row>
      <ion-row class="profilePic">
        <ion-col size="3.5">
        <ion-grid>
          <ion-row class="ion-justify-content-center">
            <div (click)="fileInput.click()" style="background-image: url({{profilePic}});" id="profilePic2"></div>
            <input type="file" accept="image/*" (change)="handleFileInput($event)" hidden #fileInput>
          </ion-row>
          <ion-row class="ion-justify-content-center">
            <ion-button [disabled]="!saveProfile" style="float: right;" size="small" expand="full" color="primary" (click)="saveProfilePic()">Save Profile</ion-button>
          </ion-row>
        </ion-grid>
      </ion-col>
        <ion-col>
          <h1>User Interests</h1>

            <ion-grid class="Userlabels">
              <ion-row class="row1">
                  <ion-item id="hover-trigger1" lines="none">
                    <ion-icon class="iconic" name="flower-outline" size="small"></ion-icon>
                    <ion-label position="stacked"></ion-label>
                    <ion-range [(ngModel)]="interests.garden" ></ion-range>
                  </ion-item>
                  <ion-popover trigger="hover-trigger1" triggerAction="hover">
                    <ng-template>
                      <ion-content class="ion-padding">
                        <ion-row>
                          <ion-col size="2">
                           <ion-icon class="iconic" name="flower-outline" color="primary" size="large"></ion-icon> 
                          </ion-col>
                          <ion-col>
                            <ion-label color="primary" style="position: absolute; top: 20%;">Garden Lover</ion-label>
                          </ion-col>
                        </ion-row>
                        <ion-row>
                          <ion-col size="2"></ion-col>
                          <ion-col size="10">"A garden is a must!"</ion-col>
                        </ion-row>
                        </ion-content>
                    </ng-template>
                  </ion-popover>
  
                  <ion-item lines="none" id="hover-trigger2">
                    <ion-icon class="iconic" name="home-outline" size="small"></ion-icon>
                    <ion-label position="stacked"></ion-label>
                    <ion-range [(ngModel)]="interests.mansion" ></ion-range>
                  </ion-item>
                  <ion-popover trigger="hover-trigger2" triggerAction="hover">
                    <ng-template>
                      <ion-content class="ion-padding">
                        <ion-row>
                          <ion-col size="2">
                           <ion-icon class="iconic" name="home-outline" color="primary" size="large"></ion-icon> 
                          </ion-col>
                          <ion-col>
                            <ion-label color="primary" style="position: absolute; top: 20%;">Mansion Passion</ion-label>
                          </ion-col>
                        </ion-row>
                        <ion-row>
                          <ion-col size="2"></ion-col>
                          <ion-col size="10">"Passionate for Mansionates"</ion-col>
                        </ion-row>
                        </ion-content>
                    </ng-template>
                  </ion-popover>

                  <ion-item lines="none" id="hover-trigger3">
                    <ion-icon class="iconic" name="eye-off-outline" size="small"></ion-icon>
                    <ion-label position="stacked"></ion-label>
                    <ion-range [(ngModel)]="interests.accessible" ></ion-range>
                  </ion-item>
                  <ion-popover trigger="hover-trigger3" triggerAction="hover">
                    <ng-template>
                      <ion-content class="ion-padding">
                        <ion-row>
                          <ion-col size="2">
                           <ion-icon class="iconic" name="eye-off-outline" color="primary" size="large"></ion-icon> 
                          </ion-col>
                          <ion-col>
                            <ion-label color="primary" style="position: absolute; top: 20%;">Accessible</ion-label>
                          </ion-col>
                        </ion-row>
                        <ion-row>
                          <ion-col size="2"></ion-col>
                          <ion-col size="10">"You prioritize an accessible castle."</ion-col>
                        </ion-row>
                        </ion-content>
                    </ng-template>
                  </ion-popover>

                  <ion-item lines="none" id="hover-trigger4">
                    <ion-icon class="iconic" name="beer-outline" size="small"></ion-icon>
                    <ion-label position="stacked"></ion-label>
                    <ion-range [(ngModel)]="interests.party" ></ion-range>
                  </ion-item>
                  <ion-popover trigger="hover-trigger4" triggerAction="hover">
                    <ng-template>
                      <ion-content class="ion-padding">
                        <ion-row>
                          <ion-col size="2">
                           <ion-icon class="iconic" name="beer-outline" color="primary" size="large"></ion-icon> 
                          </ion-col>
                          <ion-col>
                            <ion-label color="primary" style="position: absolute; top: 20%;">Where the Party Is</ion-label>
                          </ion-col>
                        </ion-row>
                        <ion-row>
                          <ion-col size="2"></ion-col>
                          <ion-col size="10">"Chasing cities that never sleep."</ion-col>
                        </ion-row>
                        </ion-content>
                    </ng-template>
                  </ion-popover>
  
                  <ion-item lines="none" id="hover-trigger5">
                    <ion-icon class="iconic" name="airplane-outline" size="small"></ion-icon>
                    <ion-label position="stacked"></ion-label>
                    <ion-range [(ngModel)]="interests.foreign" ></ion-range>
                  </ion-item>

                  <ion-popover trigger="hover-trigger5" triggerAction="hover">
                    <ng-template>
                      <ion-content class="ion-padding">
                        <ion-row>
                          <ion-col size="2">
                           <ion-icon class="iconic" name="airplane-outline" color="primary" size="large"></ion-icon> 
                          </ion-col>
                          <ion-col>
                            <ion-label color="primary" style="position: absolute; top: 20%;">Foreign Crush</ion-label>
                          </ion-col>
                        </ion-row>
                        <ion-row>
                          <ion-col size="2"></ion-col>
                          <ion-col size="10">"You've got an eye for tourist hotspots."</ion-col>
                        </ion-row>
                        </ion-content>
                    </ng-template>
                  </ion-popover>

              </ion-row>
              <ion-row class="row1">
                <ion-item lines="none" id="hover-trigger6">
                  <ion-icon class="iconic" name="school-outline" size="small"></ion-icon>
                  <ion-label position="stacked"></ion-label>
                  <ion-range [(ngModel)]="interests.student"></ion-range>
                </ion-item>
                <ion-popover trigger="hover-trigger6" triggerAction="hover">
                  <ng-template>
                    <ion-content class="ion-padding">
                      <ion-row>
                        <ion-col size="2">
                         <ion-icon class="iconic" name="school-outline" color="primary" size="large"></ion-icon> 
                        </ion-col>
                        <ion-col>
                          <ion-label color="primary" style="position: absolute; top: 20%;">Student Life</ion-label>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="2"></ion-col>
                        <ion-col size="10">"Sororities, fraternities or a good enough crib near campus."</ion-col>
                      </ion-row>
                      </ion-content>
                  </ng-template>
                </ion-popover>

                <ion-item>
                  <ion-icon class="iconic" class="iconic" name="fast-food-outline" size="small"></ion-icon>
                  <ion-label position="stacked"></ion-label>
                  <ion-range [(ngModel)]="interests.lovinIt"></ion-range>
                </ion-item>

                <ion-item>
                  <ion-icon class="iconic" name="compass-outline" size="small" ></ion-icon>
                  <ion-label position="stacked"></ion-label>
                  <ion-range [(ngModel)]="interests.farm" ></ion-range>
                </ion-item>

                <ion-item>
                  <ion-icon class="iconic" name="barbell-outline" size="small"></ion-icon>
                  <ion-label position="stacked"></ion-label>
                  <ion-range [(ngModel)]="interests.gym" ></ion-range>
                </ion-item>  

                <ion-item>
                  <ion-icon class="iconic" name="car-sport-outline" size="small"></ion-icon>
                  <ion-label position="stacked"></ion-label>
                  <ion-range [(ngModel)]="interests.owner" ></ion-range>
                </ion-item>
              </ion-row>
            </ion-grid>
        </ion-col>
      </ion-row>

      <ion-row class="utils">
        <ion-col class="navbut">
          <ion-row class="toListings">
            <ion-col>
              <ion-button class="but1" routerLink="/saved-listings" routerDirection="root">
                <ion-icon name="heart-outline" size="large"></ion-icon>
                <ion-label>Saved Listings</ion-label>
              </ion-button>             
            </ion-col>
            <ion-col>
              <ion-button class="but1" routerLink="/my-listings" routerDirection="root">
                <ion-icon name="list-outline" size="large"></ion-icon>
                <ion-label>My Listings</ion-label>
              </ion-button>              
            </ion-col>

          </ion-row>
          <ion-row class="upGrade">
            <ion-col>
              <ion-button class="but1">
                <ion-label>Change Password</ion-label>
              </ion-button>              
            </ion-col>
          </ion-row>
          <ion-row class="logOut">
            <ion-col>
              <ion-button class="logout-button" expand="full"  (click)="logout()">
                <ion-label>Log Out</ion-label>
              </ion-button>
            </ion-col>
          </ion-row>
          <ion-row class="delete">
            <ion-button class="delete-account-button" expand="full" (click)="confirmDeleteAccount()">
              Delete Account
            </ion-button>
          </ion-row>          
        </ion-col>

        <ion-col class="settings">
          <ion-row>
            <h2>User Details</h2>
          </ion-row>
          <ion-row>
            <ion-col size="8">
            <h3>Name: {{ user?.firstName }} {{ user?.lastName }} </h3>
            </ion-col>
            <ion-col>
              <ion-button  (click)="editName()" class="but2">
                <ion-icon name="create-outline" class="edit-icon" size="small"></ion-icon>
              </ion-button>           
            </ion-col>

            <div class="edits" *ngIf="isEditingName">
              <ion-input type="text" [(ngModel)]="newFirstName" placeholder="Enter a new first name" clearInput></ion-input>
              <ion-input type="text" [(ngModel)]="newLastName" placeholder="Enter a new last name" clearInput></ion-input>
              <ion-button expand="full" color="primary" (click)="saveName()">Save</ion-button>
              <ion-button expand="full" color="danger" (click)="discardName()">Cancel</ion-button>
            </div>
          </ion-row>
          <br>
          <ion-row>

            <ion-col size="8">
              <h3>Email: {{ user?.email }}</h3>
            </ion-col>
            <ion-col>
              <ion-button class="but2" (click)="editEmail()">
                <ion-icon name="create-outline" class="edit-icon" size="small"></ion-icon>
              </ion-button>
            </ion-col>


            <div class="edits" *ngIf="isEditingEmail">
              <ion-item style="width: 100%">
                <p *ngIf="googleLogged" style="color: red">
                  * Please note you are logged in via Google and this email change will only affect where notifications are sent to.
                </p>
              </ion-item>
              <ion-input type="email" [(ngModel)]="newEmail" placeholder="Enter a new email" id="email" clearInput></ion-input>
              <ion-button expand="full" color="primary" (click)="saveEmail()">Save</ion-button>
              <ion-button expand="full" color="danger" (click)="discardEmail()">Cancel</ion-button>
            </div>

          </ion-row>
          <br>
          <ion-row>

            <ion-col size="8">
              <h3>Phone Number: {{ user?.phoneNumber }}</h3>
            </ion-col>

            <ion-col>
              <ion-button class="but2" (click)="editPhoneNumber()">
                <ion-icon name="create-outline" class="edit-icon" size="small"></ion-icon>
              </ion-button>
            </ion-col>

            <div class="edits" *ngIf="isEditingPhoneNumber">
              <ion-input type="text" [(ngModel)]="newPhoneNumber" id="phoneNumber" placeholder="Enter a new phone number" clearInput></ion-input>
              <ion-button expand="full" color="primary" (click)="savePhoneNumber()">Save</ion-button>
              <ion-button expand="full" color="danger" (click)="discardPhoneNumber()">Cancel</ion-button>
            </div>

          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>

  </div>
</ion-content>
<ion-content *ngIf = "isMobile"  class ="Mobile">
  <div class="profileCard">

    <ion-grid>
      <ion-row class="profilePic">
        <ion-col>
          <ion-icon id="profileIcon" name="person-outline" (click)="fileInput.click()"></ion-icon>
          <input type="file" accept="image/*" (change)="handleFileInput($event)" hidden #fileInput>
          <h1>{{ user?.firstName }} {{ user?.lastName }}</h1>
        </ion-col>
      </ion-row>
      <ion-row>
        <ng-template *ngIf="saveProfile">
          <ion-button expand="full" color="primary" (click)="saveProfilePic()">Save</ion-button>
        </ng-template>
      </ion-row>

      <ion-col class="utils">
        <ion-col class="navbut">

          
          <ion-row class="toListings">
            <ion-col>
              <ion-button class="but1" routerLink="/saved-listings" routerDirection="root">
                <ion-icon name="heart-outline" size="large"></ion-icon>
                <ion-label>Saved Listings</ion-label>
              </ion-button>             
            </ion-col>
            <ion-col>
              <ion-button class="but1" routerLink="/my-listings" routerDirection="root">
                <ion-icon name="list-outline" size="large"></ion-icon>
                <ion-label>My Listings</ion-label>
              </ion-button>              
            </ion-col>

          </ion-row>
          <ion-row class="upGrade">
            <ion-col>
              <ion-button class="but1">
                <ion-label>Upgrade Preferences</ion-label>
              </ion-button>              
            </ion-col>
          </ion-row>
          <ion-row class="upGrade">
            <ion-col>
              <ion-button class="but1">
                <ion-label>Another wow button</ion-label>
              </ion-button>              
            </ion-col>
          </ion-row>
          <ion-row class="logOut">
            <ion-col>
              <ion-button class="logout-button" expand="full"  (click)="logout()">
                <ion-label>Log Out</ion-label>
              </ion-button>
            </ion-col>
          </ion-row>            
        </ion-col>

        
        <ion-row class="settings">
          <ion-grid>
          <ion-row>
            <h2>User Details</h2>
          </ion-row>
          <ion-row>
            <ion-col size="8">
            <h3>Name: {{ user?.firstName }} {{ user?.lastName }} </h3>
            </ion-col>
            <ion-col>
              <ion-button  (click)="editName()" class="but2">
                <ion-icon name="create-outline" class="edit-icon" size="large"></ion-icon>
              </ion-button>           
            </ion-col>

            <div class="edits" *ngIf="isEditingName">
              <ion-input type="text" [(ngModel)]="newFirstName" placeholder="Enter a new first name" clearInput></ion-input>
              <ion-input type="text" [(ngModel)]="newLastName" placeholder="Enter a new last name" clearInput></ion-input>
              <ion-button expand="full" color="primary" (click)="saveName()">Save</ion-button>
              <ion-button expand="full" color="danger" (click)="discardName()">Cancel</ion-button>
            </div>
          </ion-row>

          <ion-row>

            <ion-col size="8">
              <h3>Edit Email {{ user?.email }}</h3>
            </ion-col>
            <ion-col>
              <ion-button class="but2" (click)="editEmail()">
                <ion-icon name="create-outline" class="edit-icon" size="large"></ion-icon>
              </ion-button>
            </ion-col>


            <div class="edits" *ngIf="isEditingEmail">
              <ion-input [(ngModel)]="newEmail" placeholder="Enter a new email" clearInput></ion-input>
              <ion-button expand="full" color="primary" (click)="saveEmail()">Save</ion-button>
              <ion-button expand="full" color="danger" (click)="discardEmail()">Cancel</ion-button>
            </div>

          </ion-row>

          <ion-row>

            <ion-col size="8">
              <h3>Edit Phone Number {{ user?.phoneNumber }}</h3>
            </ion-col>

            <ion-col>
              <ion-button class="but2" (click)="editPhoneNumber()">
                <ion-icon name="create-outline" class="edit-icon" size="large"></ion-icon>
              </ion-button>
            </ion-col>

            <div class="edits" *ngIf="isEditingPhoneNumber">
              <ion-input type="text" [(ngModel)]="newPhoneNumber" placeholder="Enter a new phone number" clearInput></ion-input>
              <ion-button expand="full" color="primary" (click)="savePhoneNumber()">Save</ion-button>
              <ion-button expand="full" color="danger" (click)="discardPhoneNumber()">Cancel</ion-button>
            </div>

          </ion-row>

          <ion-row>
              <ion-button class="delete-account-button" expand="full" color="danger" (click)="confirmDeleteAccount()">
                Delete Account
              </ion-button>
          </ion-row>
          
        </ion-grid>
        </ion-row>
      
      </ion-col>
    </ion-grid>

  </div>
</ion-content>