<!-- TODO: Move inline styling to stylesheet -->
<ion-content *ngIf="!this.isMobile" class="Desktop">
  <div class="header-padding" style="height: 56px; opacity: 0; width: 100%"></div>

  <div [ngSwitch]="activeTab">

    <ion-row id="search-row">
      <ion-row id="searchBar" style="width: 100%;">
        <ion-col size="10" class="search-filter-col">
          <ion-input type="text" (ionInput)="handleInputChange($event)" id="address" class="address"
            [(ngModel)]="searchQuery" placeholder="Search for area">
            <ion-icon id="address-search-icon" name="search-outline" *ngIf="!searchLoading"></ion-icon>
            <ion-spinner id="search-spinner" name="crescent" color="primary" *ngIf="searchLoading"></ion-spinner>
        </ion-input>
            <!-- <span slot="error">Location is required</span> -->
          <ion-list *ngIf="predictionDisplay()" class="prediction-result-list">
            <ion-item class="prediction-result" (click)="replaceInputText($event,prediction.description)"
              *ngFor="let prediction of predictions">
              <!-- <a href="#" class="prediction-button"> -->
              <ion-icon name="search-outline"></ion-icon>{{ prediction.description }}
              <!-- </a> -->
            </ion-item>
          </ion-list>
        </ion-col>
        <ion-col class="search-filter-col">
          <ion-button id="searchButton" class="search-button" (click)="searchProperties()">
            <ng-container *ngIf="searching; else completedSearch">
              <ion-spinner name="crescent" color="black"></ion-spinner>
            </ng-container>
            <ng-template #completedSearch>
              Search
            </ng-template>
          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row style="width: 100%;">
        <ion-col size="10" class="search-filter-col">
          <div id="filter-container">
            <ion-grid>
              <ion-row>
                <ion-col size="4">
                  <ion-item lines="none" class="filter">
                    <ion-label class="filter-text">Property Type</ion-label>
                    <select class="dropdown" style="width: 40%;" [(ngModel)]="prop_type">
                      <option value="House">House</option>
                      <option value="Apartment">Apartment</option>
                      <option value="Commercial">Commercial Property</option>
                    </select>
                  </ion-item>
                </ion-col>
                <ion-col size="4">
                  <ion-item lines="none" class="filter">
                    <ion-label class="filter-text">Minimum Price</ion-label>
                    <select class="dropdown" style="width: 40%" [(ngModel)]="property_price_values.lower">
                      <option value="0">R0</option>
                      <option value="100000">R100K</option>
                      <option value="150000">R150K</option>
                      <option value="200000">R200K</option>
                      <option value="300000">R300k</option>
                      <option value="400000">R400k</option>
                      <option value="500000">R500k</option>
                      <option value="1000000">R1M</option>
                      <option value="2000000">R2M</option>
                      <option value="3000000">R3M</option>
                      <option value="4000000">R4M</option>
                      <option value="5000000">R5M</option>
                      <option value="10000000">R10M</option>
                      <option value="15000000">R15M</option>
                      <option value="20000000">R20M</option>
                    </select>
                  </ion-item>
                </ion-col>
                <ion-col size="4">
                  <ion-item lines="none" class="filter">
                    <ion-label class="filter-text">Maximum Price</ion-label>
                    <select class="dropdown" style="width: 40%" [(ngModel)]="property_price_values.upper">
                      <option value="0">R0</option>
                      <option value="100000">R100K</option>
                      <option value="150000">R150K</option>
                      <option value="200000">R200K</option>
                      <option value="300000">R300k</option>
                      <option value="400000">R400k</option>
                      <option value="500000">R500k</option>
                      <option value="1000000">R1M</option>
                      <option value="2000000">R2M</option>
                      <option value="3000000">R3M</option>
                      <option value="4000000">R4M</option>
                      <option value="5000000">R5M</option>
                      <option value="10000000">R10M</option>
                      <option value="15000000">R15M</option>
                      <option value="20000000">R20M</option>
                    </select>
                  </ion-item>

                </ion-col>
      
              </ion-row>
              <!-- <input type="number" [(ngModel)]="property_price_values.upper" style="width: 90%"> -->
                <!-- Additional Filters -->
                <div [className]="!showAdditionalFilters? 'animation-div-closed' : 'animation-div-class'">
                  <ion-row>
                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                      <ion-label class="filter-text">Bathrooms</ion-label>
                      <select class="dropdown" style="width: 40%"  [(ngModel)]="bath" (ionChange)="filterProperties()">
                        <option value="1">1+</option>
                        <option value="2">2+</option>
                        <option value="3">3+</option>
                        <option value="4">4+</option>
                        <option value="5">5+</option>
                      </select>
                    </ion-item>
                    </ion-col>

                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Parking</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="parking" (ionChange)="filterProperties()">
                          <option value="1">1+</option>
                          <option value="2">2+</option>
                          <option value="3">3+</option>
                          <option value="4">4+</option>
                          <option value="5">5+</option>
                        </select>
                      </ion-item>
                    </ion-col>

                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Bedrooms</ion-label>
                        <select class="dropdown" style="width: 40%" [(ngModel)]="bed">
                          <option value="1">1+</option>
                          <option value="2">2+</option>
                          <option value="3">3+</option>
                          <option value="4">4+</option>
                          <option value="5">5+</option>
                          <option value="6">6+</option>
                          <option value="7">7+</option>
                          <option value="8">8+</option>
                        </select>
                      </ion-item>
                    </ion-col>

                    
                  </ion-row>
                  <ion-row>

                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Environment</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="env_type" (ionChange)="filterProperties()">
                          <option value="Standalone House">Standalone House</option>
                          <option value="Complex">Complex</option>
                          <option value="Gated Community">Gated Community</option>
                        </select>
                      </ion-item>
                    </ion-col>

                    <ion-col size ="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Area Score</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="totalAreaScore" (ionChange)="filterProperties()">
                          <option value="0">>0</option>
                          <option value="10">>10%</option>
                          <option value="20">>20%</option>
                          <option value="30">>30%</option>
                          <option value="40">>40%</option>
                          <option value="50">>50%</option>
                          <option value="60">>60%</option>
                          <option value="70">>70%</option>
                          <option value="80">>80%</option>
                          <option value="90">>90%</option>
                        </select>
                      </ion-item>
                    </ion-col>

                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Water Score</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="areaScore.waterScore" (ionChange)="filterProperties()">
                          <option value="0">>0%</option>
                          <option value="10">>10%</option>
                          <option value="20">>20%</option>
                          <option value="30">>30%</option>
                          <option value="40">>40%</option>
                          <option value="50">>50%</option>
                          <option value="60">>60%</option>
                          <option value="70">>70%</option>
                          <option value="80">>80%</option>
                          <option value="90">>90%</option>
                        </select>
                      </ion-item>
                    </ion-col>
                    
                  </ion-row>
                  <ion-row>
                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Crime Score</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="areaScore.crimeScore" (ionChange)="filterProperties()">
                          <option value="0">>0%</option>
                          <option value="10">>10%</option>
                          <option value="20">>20%</option>
                          <option value="30">>30%</option>
                          <option value="40">>40%</option>
                          <option value="50">>50%</option>
                          <option value="60">>60%</option>
                          <option value="70">>70%</option>
                          <option value="80">>80%</option>
                          <option value="90">>90%</option>
                        </select>
                      </ion-item>
                    </ion-col>
                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Sanitation Score</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="areaScore.sanitationScore" (ionChange)="filterProperties()">
                          <option value="0">>0%</option>
                          <option value="10">>10%</option>
                          <option value="20">>20%</option>
                          <option value="30">>30%</option>
                          <option value="40">>40%</option>
                          <option value="50">>50%</option>
                          <option value="60">>60%</option>
                          <option value="70">>70%</option>
                          <option value="80">>80%</option>
                          <option value="90">>90%</option>
                        </select>
                      </ion-item>
                    </ion-col>

                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">School Score</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="areaScore.schoolScore" (ionChange)="filterProperties()">
                          <option value="0">>0%</option>
                          <option value="10">>10%</option>
                          <option value="20">>20%</option>
                          <option value="30">>30%</option>
                          <option value="40">>40%</option>
                          <option value="50">>50%</option>
                          <option value="60">>60%</option>
                          <option value="70">>70%</option>
                          <option value="80">>80%</option>
                          <option value="90">>90%</option>
                        </select>
                      </ion-item>
                    </ion-col>

                  </ion-row>
                  <ion-row>
                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Sell/Let</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="activeTab" (ionChange)="changeTab()">
                          <option value="Any">Any</option>
                          <option value="Sell">Buy</option>
                          <option value="Rent">Rent</option>
                        </select>
                      </ion-item>
                    </ion-col>

                    <ion-col lines="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Min Erf(m<sup>2</sup>)</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="property_size_values.lower" (ionChange)="filterProperties()">
                          <option value="20">20</option>
                          <option value="40">40</option>
                          <option value="60">60</option>
                          <option value="80">80</option>
                          <option value="100">100</option>
                          <option value="150">150</option>
                          <option value="200">200</option>
                          <option value="250">250</option>
                          <option value="300">300</option>
                          <option value="350">350</option>
                          <option value="400">400</option>
                          <option value="450">450</option>
                          <option value="500">500</option>
                        </select>
                      </ion-item>
                    </ion-col>

                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                        <ion-label class="filter-text">Max Erf(m<sup>2</sup>)</ion-label>
                        <select class="dropdown" style="width: 40%"  [(ngModel)]="property_size_values.upper" (ionChange)="filterProperties()">
                          <option value="20">20</option>
                          <option value="40">40</option>
                          <option value="60">60</option>
                          <option value="80">80</option>
                          <option value="100">100</option>
                          <option value="150">150</option>
                          <option value="200">200</option>
                          <option value="250">250</option>
                          <option value="300">300</option>
                          <option value="350">350</option>
                          <option value="400">400</option>
                          <option value="450">450</option>
                          <option value="500">500</option>
                        </select>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col size="4">
                      <ion-item lines="none" class="filter">
                       <ion-label class="filter-text">Features</ion-label>
                       <ion-select id="amenities-select" style="width: 40%"  class="dropdown" [(ngModel)]="features" (ionChange)="filterProperties()"
                         [multiple]="true">
                         <ion-select-option value="Pet Friendly">Pet Friendly</ion-select-option>
                         <ion-select-option value="Garden">Garden</ion-select-option>
                         <ion-select-option value="Pool">Pool</ion-select-option>
                         <ion-select-option value="Flatlet">Flatlet</ion-select-option>
                         <ion-select-option value="Wifi">Wifi</ion-select-option>
                         <ion-select-option value="Other">Other</ion-select-option>
                       </ion-select>
                     </ion-item>                     
                     </ion-col>
                  </ion-row>
                </div>
            </ion-grid>
          </div>
        </ion-col>

        <ion-col size="2" class="search-filter-col">
          <ion-button
          class="filter-button" (click)="toggleAdditionalFilters()">
            {{ showAdditionalFilters ? 'Less Filters' : 'More Filters' }}
          </ion-button>
          <ion-button class="filter-button reset-button" style="margin-top: 5%;" (click)="resetFilters()">
            Reset Filters
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-row>

  </div>


  <!-- <div class="loading-animation">
    <img src="assets/500.gif">
  </div> -->

  <section id="listings-and-map" class="upper">
    <ion-grid class="listing-map-grid">
      <!-- <ion-row class="search-result-grid-header">
        <ion-col size="4">
          <div class="area-score-toggle-container">
            <ion-toggle [(ngModel)]="status" labelPlacement="end"><ion-text class="area-score-toggle-label">Area Ratings</ion-text></ion-toggle>
          </div>
        </ion-col>
      </ion-row> -->
      <ion-row [class.listsSearching]="searching" style="display: flex; justify-content: center;">
        <ion-col style="display: flex; justify-content: center;" size="12">
          <ng-container *ngIf="searching; else listingsLoaded">
            <div class="loading-animation">
              <img src="assets/500.gif">
            </div>
          </ng-container>
          <ng-template #listingsLoaded>
            <ng-container *ngIf="listings.length === 0; else foundListings">
              <!-- <div style="display: flex; justify-content: space-between; font-weight: 500">
                <p>Enter a search query to begin your search</p>
                <ion-icon style="font-size: 24; padding-left: 10px;" name="search-outline"></ion-icon>
              </div> -->
            </ng-container> 
            <ng-template #foundListings>
              <div class="lists" id="lists">
                <ion-card class="listingCard" *ngFor="let listing of listings" >
                  <ng-container *ngIf="!cardView.get(listing.listing_id); else scoreView">
                  <ion-grid  (click)="redirectToPage(listing)">
                    <ion-row>
                      <ion-col size="4" class="imageCol">
                        <img src="{{listing.photos[0]}}" onerror="this.src='assets/no-propertyfound.png'" alt="house1">
                          <div *ngIf="getRecommendation(listing.listing_id)" 
                          class="recommended-banner">
                            Recommended <ion-icon name="star-outline"></ion-icon></div>
                      </ion-col>
                      <ion-col class="houseInfoCol" size="8">
                        <ion-grid class="houseInfoGrid">
                          <ion-row>
                            <ion-col>
                              <ion-card-title style="color: #0DAE4F;">R {{formatNumber(listing.price)}}</ion-card-title>
                            </ion-col>
                            <ion-col size="2">
                              <div class="area-score-toggle-container">
                                <ion-toggle [ngModel]="cardView.get(listing.listing_id ?? '')" (click)="changeView(listing.listing_id ?? '')" labelPlacement="end"></ion-toggle>
                              </div>
                            </ion-col>
                          </ion-row>
                          <ion-row>
                            <p class="houseText"><b>{{listing.address}}</b></p>
                          </ion-row>
                          <ion-row>
                            <p style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap">
                              {{listing.bed}} Bedroom {{listing.prop_type === "Commercial"? listing.prop_type + " Property" : listing.prop_type}}
                            </p>
                          </ion-row>
                          <ion-row>
                            <p class="houseText">For Sale!</p>
                          </ion-row>
                          <ion-row>
                            <p id="house_description">
                              {{listing.desc}}
                            </p>
                          </ion-row>
                          <ion-row>
                            <div class="house_details">
                              <img src="assets/icon/bedrooms.png">
                              {{listing.bed}}
                              &nbsp; &nbsp;&nbsp;
                              <img src="assets/icon/bathrooms.png">
                              {{listing.bath}}
                              &nbsp; &nbsp;&nbsp;
                              <img src="assets/icon/floorplan.png">
                              {{listing.floor_size}} m<sup>2</sup>
                              &nbsp; &nbsp;&nbsp;
                              <img src="assets/icon/erf.png">
                              {{listing.property_size}} m<sup>2</sup>
                            </div>
                          </ion-row>
                        </ion-grid>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ng-container>
                <ng-template #scoreView>
                  <ion-grid (click)="redirectToPage(listing)">
                    <ion-row>
                      <ion-col size="4" class="imageCol">
                        <img src="{{listing.photos[0]}}" onerror="this.src='assets/no-propertyfound.png'" alt="house1">
                          <div *ngIf="getRecommendation(listing.listing_id)" 
                          class="recommended-banner">
                            Recommended <ion-icon name="star-outline"></ion-icon></div>
                      </ion-col>
                      <ion-col class="houseInfoCol" size="8">
                        <ion-grid style="z-index:1;">
                          <ion-row>
                            <ion-grid>
                              <ion-row>
                                <ion-col>
                                  <ion-card-title style="color: #0DAE4F;">
                                      Area Rating Average: 
                                      {{((listing.areaScore.schoolScore + 
                                        listing.areaScore.crimeScore + 
                                        listing.areaScore.waterScore + 
                                        listing.areaScore.sanitationScore)/4)
                                        .toFixed(2)}}
                                    </ion-card-title>
                                </ion-col>
                                <ion-col size="2">
                                  <div class="area-score-toggle-container">
                                    <ion-toggle [ngModel]="cardView.get(listing.listing_id ?? '')" (click)="changeView(listing.listing_id ?? '')" labelPlacement="end"></ion-toggle>
                                  </div>
                                </ion-col>
                              </ion-row>
                            </ion-grid>
                          </ion-row>
                          <ion-row>
                            <ion-col>
                              <div class="white-text">Water</div>
                                <div class="slider">
                                  <div 
                                    [class.progress]="listing.areaScore.waterScore >= 60" 
                                    [class.errorProgressBar]="listing.areaScore.waterScore < 25" 
                                    [class.warningProgressBar]="listing.areaScore.waterScore < 60 && listing.areaScore.waterScore >= 25" 
                                    [style.width]="listing.areaScore.waterScore+'%'"
                                  ></div>
                                </div>
                            </ion-col>
                            <ion-col>
                            <div class="white-text">Sanitation</div>
                            <div class="slider">
                              <div 
                                [class.progress]="listing.areaScore.sanitationScore >= 60" 
                                [class.errorProgressBar]="listing.areaScore.sanitationScore < 25" 
                                [class.warningProgressBar]="listing.areaScore.sanitationScore < 60 && listing.areaScore.sanitationScore >= 25" 
                                [style.width]="listing.areaScore.sanitationScore+'%'"
                              ></div>
                            </div>
                            </ion-col>
                          </ion-row>
            
                          <ion-row style="margin-top: 2px;">
                            <ion-col>
                            <div class="white-text">Crime</div>
                            <div class="slider">
                              <div 
                                [class.progress]="listing.areaScore.crimeScore >= 60" 
                                [class.errorProgressBar]="listing.areaScore.crimeScore < 25" 
                                [class.warningProgressBar]="listing.areaScore.crimeScore < 60 && listing.areaScore.crimeScore >= 25" 
                                [style.width]="listing.areaScore.crimeScore+'%'"
                              ></div>
                            </div>
                            </ion-col>
                            <ion-col>
                            <div class="white-text">School Quality</div>
                            <div class="slider">
                              <div 
                                [class.progress]="listing.areaScore.schoolScore >= 60"  
                                [class.errorProgressBar]="listing.areaScore.schoolScore < 25"  
                                [class.warningProgressBar]="listing.areaScore.schoolScore < 60 && listing.areaScore.schoolScore >= 25" 
                                [style.width]="listing.areaScore.schoolScore+'%'"
                              ></div>
                            </div>
                            </ion-col>
                          </ion-row>
                        </ion-grid>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ng-template>
              </ion-card>
              </div>
            </ng-template>
          </ng-template>
        </ion-col>
        <!-- <ion-col style="border-left: 5px solid #94d5ae">
          <div>
            <div slot="fixed" class="map" id="map" #map></div>
          </div>
        </ion-col> -->
      </ion-row>
    </ion-grid>
    <div>
      <ion-grid>
        <ion-row style="display: flex; justify-content: center">
          <ion-col size="2" class="pageButtonCol">
            <ion-button *ngIf="listings.length > 0" [disabled]="currentPage === 0 || searching" (click)="searchProperties(false, true)" id="prevPage" class="pageButton">Previous Page</ion-button>
          </ion-col>
          <ion-col size="2" class="pageButtonCol">
            <ion-button *ngIf="listings.length > 0" [disabled]="listings.length < 5 || searching" (click)="searchProperties(true, false)" class="pageButton" id="nextPage">Next Page</ion-button>
          </ion-col>
        </ion-row>
        <ion-row style="display: flex; justify-content: space-evenly;">
          <ion-col size="2">
            <div>
              <ion-row style="display: flex; justify-content: center">
                <img style="height: 200px; width: 200px; border-radius: 50%; object-fit: cover" alt="searchPageImage" src="assets/loginImage.png">
              </ion-row>
              <ion-row style="display: flex; justify-content: center; padding-top: 10px">
                <p style="width: 75%; text-align: center">
                  <a routerLink="/register">Sign up</a> for an account to save listings and begin experiencing the full power of Proper Property's recommendation system.
                </p>
              </ion-row>
            </div>
          </ion-col>
          <ion-col size="2">
            <div>
              <ion-row style="display: flex; justify-content: center">
                <img style="height: 200px; width: 200px; border-radius: 50%; object-fit: cover" alt="searchPageImage" src="assets/areaScoreImage.jpg">
              </ion-row>
              <ion-row style="display: flex; justify-content: center; padding-top: 10px">
                <p style="width: 75%; text-align: center">
                  Find detailed information about the area surrounding a property by clicking on the area rating toggle.
                </p>
              </ion-row>
            </div>
          </ion-col>
          <ion-col size="2">
            <div>
              <ion-row style="display: flex; justify-content: center">
                <img style="height: 200px; width: 200px; border-radius: 50%; object-fit: cover" alt="searchPageImage" src="assets/userManual.jpg">
              </ion-row>
              <ion-row style="display: flex; justify-content: center; padding-top: 10px">
                <p style="width: 75%; text-align: center">
                  Feeling a bit lost? Find our help guide in the footer to get a better understanding of how to use Proper Property.
                </p>
              </ion-row>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </section>

  <!-- <div class="footer-gap"></div> -->
  <properproperty-footer></properproperty-footer>
</ion-content>

<ion-content *ngIf="this.isMobile" class="Mobile">
  <ion-segment [(ngModel)]="activeTab" (ionChange)="changeTab()">
    <ion-segment-button value="buying">
      <ion-label>Buy</ion-label>
    </ion-segment-button>
    <ion-segment-button value="renting">
      <ion-label>rent</ion-label>
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="activeTab">

    <ion-row style="width: 100%;">
      <ion-row style="width: 100%;">
        <ion-col size="9">
          <input type="text" id="address1" class="address1" [(ngModel)]="searchQuery" placeholder="search">
        </ion-col>
        <ion-col size="3">
          <ion-button class="map-button" (click)="mapView()" [class.green-button]="MapView">

            <ion-icon name="map"></ion-icon>
          </ion-button>
        </ion-col>

        <ion-col>
          <ion-button class="search-button" (click)="searchProperties()">Search</ion-button>
        </ion-col>
      </ion-row>

      <ion-row style="width: 100%;">
        <ion-col size="10">
          <div id="filter-container">
            <ion-item class="filter">
              <ion-label class="filter-text">Property Type</ion-label>
              <select class="dropdown" [(ngModel)]="prop_type">
                <option value="House">House</option>
                <option value="Apartment">Apartment</option>
                <option value="Commercial">Commercial Property</option>
              </select>
            </ion-item>

            <ion-item class="filter">
              <label class="filter-text" for="minPrice">Min Price</label>
              <select class="dropdown" [(ngModel)]="price_min">
                <option value="0">R 0</option>
                <option value="250000">R 250,000</option>
                <option value="350000">R 300,000</option>
                <option value="400000">R 400,000</option>
                <option value="500000">R 500,000</option>
                <option value="1000000">R 1,000,000</option>
                <option value="2000000">R 2,000,000+</option>
              </select>

            </ion-item>

            <ion-item class="filter">
              <label class="filter-text" for="maxPrice">Max Price</label>
              <select class="dropdown" [(ngModel)]="price_max">
                <option value="0">R 0</option>
                <option value="250000">R 250,000</option>
                <option value="350000">R 300,000</option>
                <option value="400000">R 400,000</option>
                <option value="500000">R 500,000</option>
                <option value="1000000">R 1,000,000</option>
                <option value="2000000">R 2,000,000+</option>
              </select>
            </ion-item>

            <ion-item class="filter">
              <ion-label class="filter-text">Number of Bedrooms</ion-label>
              <select class="dropdown" [(ngModel)]="bed">
                <option value="1">1 Bedroom</option>
                <option value="2">2 Bedrooms</option>
                <option value="3">3 Bedrooms</option>
                <option value="4">4 Bedrooms</option>
              </select>
            </ion-item>

            <ion-item class="filter" *ngIf="showAdditionalFilters">
              <ion-label class="filter-text">Bathrooms</ion-label>
              <select class="dropdown" [(ngModel)]="bath" (ionChange)="filterProperties()">
                <option value="1">1 Bathroom</option>
                <option value="2">2 Bathrooms</option>
                <option value="3">3 Bathrooms</option>
                <option value="4">4 Bathrooms</option>
                <option value="5">5+ Bathrooms</option>
              </select>
            </ion-item>

            <ion-item class="filter" *ngIf="showAdditionalFilters">
              <ion-label class="filter-text">Parking / Garages</ion-label>
              <select class="dropdown" [(ngModel)]="parking" (ionChange)="filterProperties()">
                <option value="1">1 Garage</option>
                <option value="2">2 Garages</option>
                <option value="3">3 Garages</option>
                <option value="4">4 Garages</option>
                <option value="5">5+ Garages</option>
              </select>
            </ion-item>

          </div>


        </ion-col>

        <ion-col>
          <ion-button class="filter-button" (click)="toggleAdditionalFilters()">
            {{ showAdditionalFilters ? 'Less Filters' : 'More Filters' }}
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-row>

    <ion-row>
      <div
        style="background-color: #f7f7f7; border: 1px solid #ccc; border-radius: 5px; padding: 10px;margin-left: 4%; margin-bottom: 1%; padding-left: 18px; width:90%;">
        <label class="filter-text" for="selectedSortOption">Order by:</label>

        <select [(ngModel)]="selectedSortOption" class="dropdown" (ionChange)="sortListings()">
          <option value="default">default</option>
          <option value="priceLowToHigh">price - low to high</option>
          <option value="priceHighToLow">price - high to low</option>
          <option value="propertyType">property type</option>
          <option value="size">size</option>
        </select>
      </div>
    </ion-row>

  </div>


  <div class="loading-animation">
    <img src="assets/500.gif">
  </div>
  <div class="footer-gap"></div>

  <div id="listings-and-map">
    <ion-grid>


      <ion-row *ngIf="!this.MapView" size="12" size-sm="6" size-md="4">

        <ion-card *ngFor="let listing of listings" (click)="redirectToPage(listing)">
          <ion-card-header>
            <img src="{{listing.photos[0]}}" alt="house1">
          </ion-card-header>
          <ion-card-content>
            <ion-card-title>{{listing.prop_type}}</ion-card-title>
            <ion-card-subtitle style="color: #94d2ae;">R {{listing.price}}</ion-card-subtitle>

            <p style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap">
              {{listing.desc}}
            </p>
            <br>
            <br>
            <div class="house_details">
              <img src="assets/icon/bedrooms.png">
              {{listing.bed}}
              &nbsp; &nbsp;&nbsp;
              <img src="assets/icon/bathrooms.png">
              {{listing.bath}}
              &nbsp; &nbsp;&nbsp;
              <img src="assets/icon/floorplan.png">
              {{listing.floor_size}} m<sup>2</sup>
              &nbsp; &nbsp;&nbsp;
              <img src="assets/icon/erf.png">
              {{listing.property_size}} m<sup>2</sup>
            </div>
          </ion-card-content>

        </ion-card>
      </ion-row>
      <ion-row>

        <ion-col size="12">

          <div class="map1" id="map1">

          </div>

        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
  <properproperty-footer style="margin-top: 2%"></properproperty-footer>
</ion-content>