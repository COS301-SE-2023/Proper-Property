<ion-content>

  <section class="sortFilter">

    <ion-grid class="grid1">
      <ion-row>
        <ion-col size="8">
          <!-- Search bar-->
          <div class="search-container">
            <input type="text" id="address" [(ngModel)]="searchQuery"   placeholder="    Property Location Search">
            <ion-button class="search-button" (click)="searchProperties()">
            <ion-icon name="search"> search</ion-icon>
            </ion-button>
          </div>
        </ion-col>
        <ion-col>
          <!-- Filters and Sorts -->

          <div class="dropDown">
            <ion-button class="butDown" (click)="dropDown()">
              Filter and Sort<ion-icon class="fil" id="iconic" name="chevron-down-outline" size="large" color="medium"></ion-icon>
            </ion-button>
          </div>
        </ion-col>
        <ion-col>
           <!-- View Type Toggle -->

           <div class="dropDown">
            <ion-toggle [checked]="true" [(ngModel)]="status" (ionChange)="onChange()"></ion-toggle>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>

  </section>

  <section class="sandf" id="sandf">

    <!-- Rent and Buy -->
    <ion-segment [(ngModel)]="activeTab" (ionChange)="changeTab()">
      <ion-segment-button value="buying">
        <ion-label>buy</ion-label>
      </ion-segment-button>
      <ion-segment-button value="all">
        <ion-label>All</ion-label>
      </ion-segment-button>
      <ion-segment-button value="renting">
        <ion-label>Rent</ion-label>
      </ion-segment-button>
    </ion-segment>

    <!-- Property Type and  Rooms -->
    <div [ngSwitch]="activeTab">

      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-item class="filter">
              <ion-label>Property Type</ion-label>
              <ion-select [(ngModel)]="selectedPropertyType" (ionChange)="filterProperties()">
                <ion-select-option value="House" >House</ion-select-option>
                <ion-select-option value="Apartment">Apartment</ion-select-option>
                <ion-select-option value="Commercial">Commercial Property</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item class="filter">
              <ion-label>Number of Bedrooms</ion-label>
              <ion-select [(ngModel)]="selectedBedrooms" (ionChange)="filterProperties()">
                <ion-select-option value="1">1 Bedroom</ion-select-option>
                <ion-select-option value="2">2 Bedrooms</ion-select-option>
                <ion-select-option value="3">3 Bedrooms</ion-select-option>
                <ion-select-option value="4">4 Bedrooms</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label>Bathrooms</ion-label>
              <ion-select [(ngModel)]="selectedBathrooms" (ionChange)="filterProperties()">
                <ion-select-option value="1">1 Bathroom</ion-select-option>
                <ion-select-option value="2">2 Bathrooms</ion-select-option>
                <ion-select-option value="3">3 Bathrooms</ion-select-option>
                <ion-select-option value="4">4 Bathrooms</ion-select-option>
                <ion-select-option value="5">5+ Bathrooms</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item>
              <ion-label>Parking / Garage</ion-label>
              <ion-select [(ngModel)]="selectedParking" (ionChange)="filterProperties()">
                <ion-select-option value="1">1 Garage</ion-select-option>
                <ion-select-option value="2">2 Garages</ion-select-option>
                <ion-select-option value="3">3 Garages</ion-select-option>
                <ion-select-option value="4">4 Garages</ion-select-option>
                <ion-select-option value="5">5+ Garages</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label class="Amenities">Amenities</ion-label>
              <ion-select multiple="true" [(ngModel)]="selectedAmenities" (ionChange)="filterProperties()">
                <ion-select-option value="petFriendly">Pet Friendly</ion-select-option>
                <ion-select-option value="garden">Garden</ion-select-option>
                <ion-select-option value="pool">Pool</ion-select-option>
                <ion-select-option value="flatlet">Flatlet</ion-select-option>
                <ion-select-option value="other">Other</ion-select-option>
                <ion-select-option value="retirement">Retirement</ion-select-option>
                <ion-select-option value="repossession">Repossession</ion-select-option>
                <ion-select-option value="onShow">On Show</ion-select-option>
                <ion-select-option value="securityEstate">Security Estate / Cluster</ion-select-option>
                <ion-select-option value="auction">Auction</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>

      </ion-grid>

      <!-- MIn-Max -->

      <div class="wrapper">
        <div class="inputPrice">
          <div class="field">
            <span>Min</span>
            <input type="number" class="mini" value="100000" (ionChange)="filterProperties()">
          </div>
          <div class="dash">-</div>
          <div class="field">
            <span>Max</span>
            <input type="number" class="maxi" value="450000">
          </div>
        </div>
        
        <div class="slides">
          <div class="bar"></div>
        </div>
        <div class="theranges">
          <input type="range" class="minrange" min="0" max="1000000" value="100000">
          <input type="range" class="maxrange" min="0" max="1000000" value="450000">
        </div>
      </div>
    </div>
  </section>


  <!-- Map And Listings -->
  <section id="listings-and-map" class="upper">

      <div class="lists" id="lists">
        <ion-card *ngFor="let listing of listings" >
          <ion-card-header (click)="redirectToPage(listing)">
            <img src="{{listing.photos[0]}}" alt="house1">
            <ion-card-title style="color: #0DAE4F;">R {{listing.price}}</ion-card-title>
          </ion-card-header>
          <ion-button class="pin" (click)="centerMap(listing)">
            <ion-icon name="location-outline" size="large" color="primary"></ion-icon>
          </ion-button>
          <ion-card-content (click)="redirectToPage(listing)">
           
            <p style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap">
              {{listing.bed}} bedroom/{{listing.prop_type}}
            </p>
            <ng-template [ngIf] ="listing.let_sell === 'Sell'">
              <p>For Sale!</p>
            </ng-template>
            <ng-template [ngIf] ="listing.let_sell === 'Rent'">
              <p>To Let!</p>
            </ng-template>
            <p>
             In {{listing.address}}
            </p>
            <br>
            <div id="house_details">
              <img src="assets/icon/bedrooms.png">
              {{listing.bed}}
              &nbsp; &nbsp;&nbsp;
              <img src="assets/icon/bathrooms.png">
              {{listing.bath}}
              &nbsp; &nbsp;&nbsp;
              <img src="assets/icon/floorplan.png">
              {{listing.floor_size}} m<sup>2</sup>
              &nbsp; &nbsp;&nbsp;
              <img src="assets/icon/erf.png">
              {{listing.property_size}} m<sup>2</sup>
            </div>
          </ion-card-content>
        </ion-card>
  
      </div>

      <div class="lists2" id="lists2">
        <ion-card *ngFor="let listing of listings" >
          <ion-card-header (click)="redirectToPage(listing)">
            <img src="{{listing.photos[0]}}" alt="house1">
            <ion-card-title style="color: #0DAE4F;">Area Rating 4.3</ion-card-title>
          </ion-card-header>
          <ion-button class="pin" (click)="centerMap(listing)">
            <ion-icon name="location-outline" size="large" color="primary"></ion-icon>
          </ion-button>
          <ion-card-content (click)="redirectToPage(listing)">
           
            <ion-grid style="z-index:1;">
              <ion-row>
                <ion-col>
                  <div class="white-text">Water</div>
                    <div class="slider">
                      <div class="progress" style="width: 80%"></div>
                    </div>
                </ion-col>
                <ion-col>
                <div class="white-text">Power</div>
                <div class="slider">
                  <div class="progress" style="width: 30%"></div>
                </div>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                <div class="white-text">Crime</div>
                <div class="slider">
                  <div class="progress" style="width: 60%"></div>
                </div>
                </ion-col>
                <ion-col>
                <div class="white-text">Pollution</div>
                <div class="slider">
                  <div class="progress" style="width: 50%"></div>
                </div>                  
                </ion-col>
              </ion-row>
            </ion-grid>
            <br>
            <div id="house_details">
              {{listing.address}}
            </div>
          </ion-card-content>
        </ion-card>
  
      </div>
      <div slot="fixed" class="map" #map></div>
  </section>
</ion-content>
