<ion-header [translucent]="true">

  <ion-toolbar class="profile-nav">

    <ion-tabs>
      <ion-tab-bar slot="end">
        <ion-tab-button tab="profile" routerLink="/profile" routerDirection="root">
          <ion-icon name="person-circle-outline"></ion-icon>
          <ion-label>Profile</ion-label>
        </ion-tab-button>

        <ion-tab-button tab="create-listing" routerLink="/create-listing" routerDirection="root" class="green-tab">
          <ion-icon name="add-circle-outline"></ion-icon>
          <ion-label>Create Listing</ion-label>
        </ion-tab-button>

        <ion-tab-button tab="saved-listings" routerLink="/saved-listings" routerDirection="root">
          <ion-icon name="heart-outline"></ion-icon>
          <ion-label>Saved Listings</ion-label>
        </ion-tab-button>

        <ion-tab-button tab="my-listings" routerLink="/my-listings" routerDirection="root">

          <ion-icon name="list-outline"></ion-icon>
          <ion-label>My Listings</ion-label>
        </ion-tab-button>
      </ion-tab-bar>
    </ion-tabs>

  </ion-toolbar>
</ion-header>


<ion-content [fullscreen]="true" *ngIf="!isMobile" class="Desktop" style="position: absolute; top: 13%;">
  <div id="loader" #loader>
    <div id="approval-message">{{loadingMessage}}</div>
    <img src="assets/500.gif">
  </div>
  <div class="add-property">
    <ion-grid [fixed]="false" id="full-grid">
      
      <ion-row id="add-photos">
        <ion-col id="current-images" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
          <!-- Display uploaded images here -->
          <div *ngFor="let photo of photos; let i = index" class="uploaded-image">
            <img [src]="photo" alt="Uploaded Image" />
            <ion-icon name="close-circle" (click)="removeImage(i)"></ion-icon>
          </div>
          <div class="drag-drop-area" (click)="fileInput.click()">
            <ion-icon name="add-circle-outline" class="icon-on-top"></ion-icon>
            <ion-label class="house-text">Click here to add images of your property<span class="required-indicator" *ngIf="!photos.length">*</span></ion-label>
            
          </div>
        </ion-col>
      </ion-row>
      <ion-row id="AcceptImageNoDisplay">
        <ion-col size="auto" id="choose-input" class="ion-text-center ion-justify-content-center">
          <input type="file" accept="image/*" (change)="handleFileInput($event)" hidden #fileInput>
          <!-- <ion-button expand="full" (click)="fileInput.click()" class="btnUpload">
          <ion-label class="imageText">Add Image</ion-label>
        </ion-button> -->
        </ion-col>
      </ion-row>




    <ion-row id="house-details">
      <ion-row>
        <ion-col>
          <div class="container">
            <div class="searchInput">
              <label position="floating" class="house-text">Property Residential Address<span class="required-indicator"
                  *ngIf="!address">*</span></label>
              <ion-input (ionInput)="handleInputChange($event)" type="text" class="house-text" id="address"
              [(ngModel)]="address" placeholder="Enter an address" > <ion-spinner id="address-spinner" name="crescent" color="black" *ngIf="loadingAddress"></ion-spinner></ion-input>
              <ion-list class="prediction-result-list" *ngIf="showPredictions">
       
               <ion-item lines="none" class="prediction-result" (click)="replaceInputText($event,prediction.description)" *ngFor="let prediction of predictions">
                <!-- <a href="#" class="prediction-button"> -->
                  <ion-icon class="search-result-icon" name="search-outline"></ion-icon>{{ prediction.description }}
                <!-- </a> -->
               </ion-item>
              </ion-list>

                  <!-- <ion-item (click)="replaceInputText($event,prediction.description)"
                    *ngFor="let prediction of predictions">
                    <!-- <a href="#" class="prediction-button"> -->
                    <!-- {{ prediction.description }} -->
                    <!-- </a> -->
                  <!-- </ion-item> -->
                <!-- </ion-list> -->

                <div class="icon"><i class="fas fa-search"></i></div>
              </div>
            </div>
          </ion-col>
          <ion-col>
            <div class="container">
              <div class="searchInput">
                <label position="floating" class="house-text">Property District Municipality
                  <a href="https://www.dws.gov.za/niwis2/dwq2" target="_blank" rel="noopener" style="height:15px;">
                    <ion-icon id="help-icon" name="help-circle-outline"></ion-icon>
                  </a><span class="required-indicator" *ngIf="!municipalitySelected">*</span>
                </label>
                <!-- <ion-input type="text" class="house-text" id="address" [(ngModel)]="district"
                  placeholder="Enter the district of you listing" (ionInput)="handleMunicipalityInputChange($event)"></ion-input>

                  <ion-list [hidden]="filteredMunicipalities.length === 0">
                    <ion-item (click)="selectMunicipality(municipality)" *ngFor="let municipality of filteredMunicipalities">
                      {{ municipality }}
                    </ion-item>
                  </ion-list> -->

                  <ion-input (ionInput)="handleMunicipalityInputChange($event)" class="house-text" id="address" [(ngModel)]="district"
                    placeholder="Enter the district of your listing"></ion-input>
                  <ion-list *ngIf="showMunicipalities" class="prediction-result-list">
                    <ion-item lines="none" class="prediction-result" (click)="selectMunicipality(municipality)" *ngFor="let municipality of filteredMunicipalities">
                      {{ municipality }}
                    </ion-item>
                  </ion-list>

              </div>
            </div>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col width="6">
                <ion-row class="dropdown">
                  <ion-col size="6" class="label-col">
                    <ion-label class="house-text">Listing Price<span class="required-indicator"
                        *ngIf="!price">*</span></ion-label>
                  </ion-col>
                  <ion-col size="6" class="label-col">
                    <ion-input class="digit-input box-size" style="height: 30px;" type="number" id="price" [(ngModel)]="price" (input)="formatPrice()"
                    (keypress)="numericOnly($event)" (ionInput)="onInputPrice($event)" required></ion-input>
                    <ion-note slot="end">ZAR</ion-note>
                  </ion-col>
                </ion-row>
          </ion-col>
          <ion-col width="6">
            <ion-row class="dropdown">
              <ion-col size="6" class="label-col">
                <label position="floating" class="house-text">Possession Type:</label>
              </ion-col>
              <ion-col class="">
                <select [(ngModel)]="pos_type" style="height: 30px;" class="house-dropdown" aria-label="pos-type">
                  <option value="Leasehold">Leasehold</option>
                  <option value="Freehold">Freehold</option>
                  <option value="Condominium">Condominium</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">
                <ion-row class="dropdown" >
                  <ion-col size="6" class="label-col">
                    <ion-label class="house-text">Bedroom Count<span class="required-indicator"
                        *ngIf="!bedrooms">*</span></ion-label>
                  </ion-col>
                  <ion-col size="6" class="label-col">
                    <ion-input class="digit-input box-size" style="height: 30px;" type="number" id="bed" [(ngModel)]="bedrooms" (keypress)="numericOnly($event)" (ionInput)="onInputBedroom($event)"
                      required></ion-input>
                  </ion-col>
                </ion-row>
          </ion-col>
          <ion-col>
            <ion-row class="dropdown">
              <ion-col size="6" class="label-col">
                <label position="floating" class="house-text">Community Environment:</label>
              </ion-col>
              <ion-col class="">
                <select [(ngModel)]="env_type" style="height: 30px;" class="house-dropdown" aria-label="env-type">
                  <option value="Gated Community">Gated Community</option>
                  <option value="Complex">Complex</option>
                  <option value="Standalone House">Standalone House</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">
                <ion-row class="dropdown">
                  <ion-col size="6" class="label-col">
                    <ion-label class="house-text">Bathroom Count<span class="required-indicator"
                        *ngIf="!bathrooms">*</span></ion-label>
                  </ion-col>
                  <ion-col size="6" class="label-col">
                    <ion-input class="digit-input box-size" style="height: 30px;" type="number" id="bath" [(ngModel)]="bathrooms" (keypress)="numericOnly($event)" (ionInput)="onInputBathroom($event)"
                      required></ion-input>
                  </ion-col>
                </ion-row>
          </ion-col>
          <ion-col>
            <ion-row class="dropdown">
              <ion-col size="6" class="label-col">
                <label position="floating" class="house-text">Orientation:</label>
              </ion-col>
              <ion-col class="">
                <select [(ngModel)]="orientation" style="height: 30px;" class="house-dropdown" aria-label="orientation">
                  <option value="North">North</option>
                  <option value="East">East</option>
                  <option value="West">West</option>
                  <option value="South">South</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">
                <ion-row class="dropdown">
                  <ion-col size="6" class="label-col">
                    <ion-label class="house-text">Erf size &#40; m<sup>2</sup>&#41;<span class="required-indicator"
                        *ngIf="!erf_size">*</span></ion-label>
                  </ion-col>

                  <ion-col size="6" class="label-col">
                    <ion-input class="digit-input box-size" style="height: 30px;" type="number" id="property-size" [(ngModel)]="erf_size" (keypress)="numericOnly($event)" (ionInput)="onInputErf($event)"
                      required></ion-input>
                  </ion-col>
                </ion-row>
          </ion-col>
          <ion-col>
            <ion-row class="dropdown">
              <ion-col size="6" class="label-col">
                <label position="floating" class="house-text">Property Type:</label>
              </ion-col>
              <ion-col class="dropdownCol">
                <select [(ngModel)]="prop_type" style="height: 30px;" class="house-dropdown" aria-label="prop-type" id="prop-type">
                  <option value="House">House</option>
                  <option value="Apartment">Apartment</option>
                  <option value="Commercial">Commercial Property</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">
                <ion-row class="dropdown">
                  <ion-col size="6" class="label-col">
                    <ion-label class="house-text">Floor Size &#40; m<sup>2</sup>&#41;<span class="required-indicator"
                        *ngIf="!floor_size">*</span></ion-label>
                  </ion-col>

                  <ion-col size="6" class="label-col">
                    <ion-input class="digit-input box-size" style="height: 30px;" type="number" id="floor-size" [(ngModel)]="floor_size" (keypress)="numericOnly($event)" (ionInput)="onInputFloor($event)"
                      required></ion-input>
                  </ion-col>
                </ion-row>
          </ion-col>
          <ion-col>
            <ion-row class="dropdown">
              <ion-col size="6" class="label-col">
                <label position="floating" class="house-text">Furnishing:</label>
              </ion-col>
              <ion-col class="dropdownCol">
                <select [(ngModel)]="furnish_type" style="height: 30px;" class="house-dropdown" aria-label="furnishing">
                  <option value="Furnished">Furnished</option>
                  <option value="Partly Furnished">Partly Furnished</option>
                  <option value="Not Furnished">Not Furnished</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">
                <ion-row class="dropdown">
                  <ion-col size="6" class="label-col">
                    <ion-label class="house-text">Parking<span class="required-indicator"
                        *ngIf="!parking">*</span></ion-label>
                  </ion-col>

                  <ion-col size="6" class="label-col">
                    <ion-input class="digit-input box-size" style="height: 30px;" type="number" id="parking" [(ngModel)]="parking" (keypress)="numericOnly($event)" (ionInput)="onInputParking($event)"
                      required></ion-input>
                  </ion-col>
                </ion-row>

          </ion-col>
          <ion-col class="toggleCol">
            <div class="toggleLabel">
              <ion-label class="house-text">Let</ion-label>
              <ion-toggle style="padding: 10px;" [checked]="false" (click)="changeListingType()"
                [(ngModel)]="selectedValue"></ion-toggle>
              <ion-label class="house-text">Sell</ion-label>
            </div>
          </ion-col>
          <ion-col class="toggleCol">
            <div class="toggleLabel">
              <ion-label class="house-text">Urban</ion-label>
              <ion-toggle style="padding: 10px;" [checked]="false" (click)="changeListingAreaType()"
                [(ngModel)]="listingAreaTypeSlider"></ion-toggle>
              <ion-label class="house-text">Rural</ion-label>
            </div>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">
            <ion-label class="house-text">Add Property Features:</ion-label>

            <ion-row>
              <ion-col size="8" style="padding: 0">
                <ion-input (ionInput)="handleAmenityInputChange($event)" id="feat-in" class="feat-in" type="text"
                  placeholder="Feature" class="addFeat house-text" [(ngModel)]="selectedAmenity"
                  placeholder="Search amenities" (keydown.enter)="addFeature()"></ion-input>
              </ion-col>
              <ion-col style="align-items: center;">
                <ion-button (click)="addFeature()" class="addButt" style="height: 80%;">Add</ion-button>
              </ion-col>
            </ion-row>
            <ion-list [hidden]="filteredAmenities.length === 0">
              <ion-item lines="none" class="amenityClick" (click)="selectAmenity(amenity)" *ngFor="let amenity of filteredAmenities">
                {{ amenity }}
              </ion-item>
            </ion-list>
            <ion-item lines="none" class="ion-container" *ngFor="let feat of features,; let i = index">
              <ion-label>
                <ion-chip color="black">
                  &nbsp;
                  {{feat}}
                  &nbsp;
                  <ion-icon name="close-circle" (click)="removeFeature(i)"></ion-icon>
                  <ion-icon name="close" slot="end"></ion-icon>
                </ion-chip>
              </ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="6">
              <ion-row>
                <ion-col>
                  <ion-label class="house-text">Property Heading</ion-label>
                  <textarea [(ngModel)]="heading" id="desc" rows="3" cols="50" style="border: 1px solid rgb(183, 183, 183);">{{heading}}</textarea><br>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col>
                  <ion-label class="house-text">Property Description</ion-label>
                  <textarea [(ngModel)]="description" id="desc" rows="10" cols="50" style="border: 1px solid rgb(183, 183, 183);">{{description}}</textarea><br>
                  <ng-container *ngIf="descriptionLoading; else generateButton">
                    <ion-button><ion-spinner name="crescent" color="black"
                        class="search-icon"></ion-spinner></ion-button>
                  </ng-container>
                  <ng-template #generateButton>
                    <ion-button (click)="generateDesc()">AI Generated Description</ion-button>
                  </ng-template>
                </ion-col>
              </ion-row>
          </ion-col>
        </ion-row>

        <ion-row style="width:100%; position: relative; top: -35px;">
          <ng-container *ngIf="!ownerViewing; else ownerView">
            <ion-button (click)="addListing('create')"
              [disabled]="photos.length === 0 ||!address||!price||!bedrooms||!bathrooms||!floor_size||!erf_size||!parking||!district">SUBMIT
              LISTING</ion-button>
          </ng-container>
          <ng-template #ownerView>
            <ion-button (click)="editListing()"
              [disabled]="photos.length === 0 ||!address||!price||!bedrooms||!bathrooms||!floor_size||!erf_size||!parking||!district">SUBMIT
              EDITS
            </ion-button>
          </ng-template>&nbsp;&nbsp;
          <ion-button (click)="addListing('save')"
            [disabled]="photos.length === 0 ||!address||!price||!bedrooms||!bathrooms||!floor_size||!erf_size||!parking||!district">DRAFT
            LISTING</ion-button>
        </ion-row>
      </ion-row>
      <div style="height:200px;"></div>
    </ion-grid>
  </div>
  <properproperty-footer></properproperty-footer>


  <!-- <input #placesRef="ngx-places" ngx-gp-autocomplete [options]='options' (onAddressChange)="handleAddressChange($event)"/> -->
</ion-content>

<ion-content [fullscreen]="true" *ngIf="isMobile" class="Mobile">
  <div id="loader" #loader>
    <div id="approval-message">{{loadingMessage}}</div>
    <img src="assets/500.gif">
  </div>
  <div class="add-property">
    <ion-grid [fixed]="false" id="full-grid">
      <ion-label class="imageText" id="photoHeading">Add Photos of your Property</ion-label>
      <span class="required-indicator" *ngIf="!photos.length">*</span>

      <ion-row id="add-photos">
        <ion-col id="current-images" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
          <!-- Display uploaded images here -->
          <div *ngFor="let photo of photos; let i = index" class="uploaded-image">
            <img [src]="photo" alt="Uploaded Image" />
            <ion-icon name="close-circle" (click)="removeImage(i)"></ion-icon>
          </div>
          <div class="drag-drop-area" (click)="fileInput.click()">
            <ion-icon name="add-circle-outline" class="icon-on-top"></ion-icon>
            <ion-label class="imageText">Click here to add an image</ion-label>
          </div>
        </ion-col>
      </ion-row>
      <ion-row id="AcceptImageNoDisplay">
        <ion-col size="auto" id="choose-input" class="ion-text-center ion-justify-content-center">
          <input type="file" accept="image/*" (change)="handleFileInput($event)" hidden #fileInput>
          <!-- <ion-button expand="full" (click)="fileInput.click()" class="btnUpload">
          <ion-label class="imageText">Add Image</ion-label>
        </ion-button> -->
        </ion-col>
      </ion-row>




      <ion-row id="house-details">
        <ion-row style="width: 100%;">
          <ion-item lines="none" class="ion-container">
            <div class="container">
              <div class="searchInput">
                <label position="floating" class="house-text">Property Residential Address<span
                    class="required-indicator" *ngIf="!address">*</span></label>
                <ion-input (ionInput)="handleInputChange($event)" type="text" class="house-text" id="address"
                  [(ngModel)]="address" placeholder="Enter an address"></ion-input>
                <ion-list [hidden]="predictions.length <= 0">

                  <ion-item lines="none" (click)="replaceInputText($event,prediction.description)"
                    *ngFor="let prediction of predictions">
                    <!-- <a href="#" class="prediction-button"> -->
                    {{ prediction.description }}
                    <!-- </a> -->
                  </ion-item>
                </ion-list>
                <div class="icon"><i class="fas fa-search"></i></div>
              </div>
            </div>
          </ion-item>
        </ion-row>

        <ion-row style="width: 100%;">
          <!-- <ion-col>
          <ion-item class="ion-container">
            <ion-label position="floating" class="house-text">Floor Size &#40; m<sup>2</sup>&#41;<span
                class="required-indicator" *ngIf="!floor_size">*</span></ion-label>

            <ion-input type="number" id="floor-size" [(ngModel)]="floor_size" required></ion-input>

          </ion-item>
        </ion-col> -->

          <ion-col>
            <ion-item lines="none" class="ion-container">

              <ion-label position="floating" class="house-text">Listing Price &#40; ZAR &#41;<span
                  class="required-indicator" *ngIf="!price">*</span></ion-label>

              
            <!-- <ion-input type="text" id="price" [(ngModel)]="price" required></ion-input> -->
           
        

              <ion-input type="text" id="price" [(ngModel)]="price" (input)="formatPrice()" required></ion-input>



            </ion-item>
          </ion-col>
          <ion-col>
            <ion-row class="dropdown">
              <ion-col>
                <label position="floating" class="house-text">Possession Type:</label>
              </ion-col>
              <ion-col>
                <select [(ngModel)]="pos_type" class="house-dropdown" aria-label="pos-type" id="pos-type">
                  <option value="Leasehold">Leasehold</option>
                  <option value="Freehold">Freehold</option>
                  <option value="Condominium">Condominium</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row style="width: 100%;">
          <ion-col>
            <ion-row class="dropdown">
              <ion-col>
                <label position="floating" class="house-text" style="margin-left: 3%">Type:</label>
              </ion-col>
              <ion-col>
                <select [(ngModel)]="prop_type" class="house-dropdown" aria-label="prop-type" id="prop-type">
                  <option value="House">House</option>
                  <option value="Apartment">Apartment</option>
                  <option value="Commercial">Commercial</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
          <ion-col>
            <ion-row class="dropdown">
              <ion-col>
                <label [(ngModel)]="env_type" position="floating" class="house-text">Environment:</label>
              </ion-col>
              <ion-col>
                <select class="house-dropdown" aria-label="env-type">
                  <option value="Gated Community">Gated Community</option>
                  <option value="Complex">Complex</option>
                  <option value="Standalone House">Standalone House</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row style="width: 100%;">
          <ion-col>
            <ion-row class="dropdown">
              <ion-col>
                <label position="floating" class="house-text" style="margin-left: 3%">Furnishing:</label>
              </ion-col>
              <ion-col>
                <select [(ngModel)]="furnish_type" class="house-dropdown" aria-label="furnishing">
                  <option value="Furnished">Furnished</option>
                  <option value="Partly Furnished">Partly-Furnished</option>
                  <option value="Not Furnished">Not-Furnished</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
          <ion-col>
            <ion-row class="dropdown">
              <ion-col>
                <label position="floating" class="house-text">Orientation:</label>
              </ion-col>
              <ion-col>
                <select [(ngModel)]="orientation" class="house-dropdown" aria-label="orientation">
                  <option value="North">North</option>
                  <option value="East">East</option>
                  <option value="West">West</option>
                  <option value="South">South</option>
                </select>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row style="width:100%;">
          <ion-col>
            <ion-item class="ion-container">
              <ion-label position="floating" class="house-text">Bathrooms<span class="required-indicator"
                  *ngIf="!bathrooms">*</span></ion-label>

              <ion-input type="number" id="bath" [(ngModel)]="bathrooms" required></ion-input>

            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item class="ion-container">
              <ion-label position="floating" class="house-text">Bedrooms<span class="required-indicator"
                  *ngIf="!bedrooms">*</span></ion-label>

              <ion-input type="number" id="bed" [(ngModel)]="bedrooms" required></ion-input>

            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item class="ion-container">
              <ion-label position="floating" class="house-text">Floor Size &#40; m<sup>2</sup>&#41;<span
                  class="required-indicator" *ngIf="!floor_size">*</span></ion-label>

              <ion-input type="number" id="floor-size" [(ngModel)]="floor_size" required></ion-input>

            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row style="width: 100%;">

          <ion-col>
            <ion-item class="ion-container">
              <ion-label position="floating" class="house-text">Erf size &#40; m<sup>2</sup>&#41;<span
                  class="required-indicator" *ngIf="!erf_size">*</span></ion-label>

              <ion-input type="number" id="property-size" [(ngModel)]="erf_size" required></ion-input>

            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item class="ion-container">
              <ion-label position="floating" class="house-text">Parking<span class="required-indicator"
                  *ngIf="!parking">*</span></ion-label>

              <ion-input type="number" id="parking" [(ngModel)]="parking" required></ion-input>

            </ion-item>
          </ion-col>
          <ion-col>
            <ion-list class="ion-container" style="margin-top: 4.5%;">
              <ion-item>
                <ion-label class="house-text">Let</ion-label>
                <ion-toggle style="padding: 10px;" [checked]="false" (click)="changeListingType()"
                  [(ngModel)]="selectedValue"></ion-toggle>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <ion-label class="house-text">Sell</ion-label>
              </ion-item>
              <ion-item>
                <ion-label class="house-text">Urban</ion-label>
                <ion-toggle style="padding: 10px;" [checked]="false" (click)="changeListingAreaType()"
                  [(ngModel)]="listingAreaTypeSlider"></ion-toggle>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <ion-label class="house-text">Rural</ion-label>
              </ion-item>
            </ion-list>
          </ion-col>
        </ion-row>

        <ion-row style="width: 100%; margin-top: 1.5%;">
          <ion-col size="8">
            <ion-label class="house-text">Add Property Features:</ion-label>
            <ion-input (ionInput)="handleAmenityInputChange($event)" id="feat-in" class="feat-in" type="text"
              placeholder="Feature" class="addFeat house-text" [(ngModel)]="selectedAmenity"
              placeholder="Search amenities" (keydown.enter)="addFeature()"></ion-input>

            <ion-list [hidden]="filteredAmenities.length === 0">
              <ion-item (click)="selectAmenity(amenity)" *ngFor="let amenity of filteredAmenities">
                {{ amenity }}
              </ion-item>
            </ion-list>
            &nbsp;<ion-button (click)="addFeature()" class="addButt">Add</ion-button><br>
            <ion-item class="ion-container" *ngFor="let feat of features,; let i = index">
              <ion-label>
                <ion-chip>
                  &nbsp;
                  {{feat}}
                  &nbsp;
                  <ion-icon name="close-circle" (click)="removeFeature(i)"></ion-icon>
                  <ion-icon name="close" slot="end"></ion-icon>
                </ion-chip>
              </ion-label>
            </ion-item>
          </ion-col>
        </ion-row>

        <ion-row style="width: 100%; margin-top: 1.5%;">
          <ion-col size="12">
            <ion-label class="house-text">Property Description</ion-label>
            <textarea [(ngModel)]="description" id="desc" rows="10" cols="50">{{description}}</textarea><br>
            <ion-button (click)="generateDesc()">AI Generated Description</ion-button>
          </ion-col>
        </ion-row>

        <ion-row style="width:100%; top: 30%; position: absolute;">
          <ng-container *ngIf="!ownerViewing; else ownerView">
            <ion-button (click)="addListing('create')"
              [disabled]="photos.length === 0 ||!address||!price||!bedrooms||!bathrooms||!floor_size||!erf_size||!parking">SUBMIT
              LISTING</ion-button>
          </ng-container>
          <ng-template #ownerView>
            <ion-button (click)="editListing()"
              [disabled]="photos.length === 0 ||!address||!price||!bedrooms||!bathrooms||!floor_size||!erf_size||!parking">SUBMIT
              EDITS
            </ion-button>
          </ng-template>&nbsp;&nbsp;
          <ion-button (click)="addListing('save')"
            [disabled]="photos.length === 0 ||!address||!price||!bedrooms||!bathrooms||!floor_size||!erf_size||!parking">DRAFT
            LISTING</ion-button>
        </ion-row>
      </ion-row>
      <div style="height:200px;"></div>
    </ion-grid>
  </div>
  <properproperty-footer></properproperty-footer>


  <!-- <input #placesRef="ngx-places" ngx-gp-autocomplete [options]='options' (onAddressChange)="handleAddressChange($event)"/> -->
</ion-content>